import{d as zt,t as vt,a as ct}from"../chunks/ucPUQK8e.js";import{h as U,x as $t,E as Dt,aE as Gt,aF as Jt,am as Vt,M as Wt,aG as Ht,aH as Kt,an as Qt,n as q,T as At,V as Nt,W as Ut,O as Xt,au as Yt,aa as h,aB as S,s as d,Q as b,S as ut,g as a,P as Zt,aI as Et,aD as k,R as p}from"../chunks/BmMVTwCn.js";import{a as te,s as St}from"../chunks/CUdrXLxc.js";import{i as ee}from"../chunks/mBJVjNyV.js";import{e as ae,i as ie}from"../chunks/Cd3QV5jf.js";import{s as H,b as z,r as Tt}from"../chunks/D4IKf1ER.js";import{w as re,b as Ft}from"../chunks/DayZOA67.js";import{o as se}from"../chunks/OoTi-_9u.js";function Lt(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=Lt(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function ne(){for(var e,t,r=0,s="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=Lt(e))&&(s&&(s+=" "),s+=t);return s}function Ct(e){return typeof e=="object"?ne(e):e??""}function oe(e,t,r){var s=e==null?"":""+e;return t&&(s=s?s+" "+t:t),s===""?null:s}function le(e,t){return e==null?null:String(e)}function I(e,t,r,s,l,v){var o=e.__className;if(U||o!==r||o===void 0){var _=oe(r,s);(!U||_!==e.getAttribute("class"))&&(_==null?e.removeAttribute("class"):e.className=_),e.__className=r}return v}function K(e,t,r,s){var l=e.__style;if(U||l!==t){var v=le(t);(!U||v!==e.getAttribute("style"))&&(v==null?e.removeAttribute("style"):e.style.cssText=v),e.__style=t}return s}const ce=()=>performance.now(),$={tick:e=>requestAnimationFrame(e),now:()=>ce(),tasks:new Set};function Ot(){const e=$.now();$.tasks.forEach(t=>{t.c(e)||($.tasks.delete(t),t.f())}),$.tasks.size!==0&&$.tick(Ot)}function ue(e){let t;return $.tasks.size===0&&$.tick(Ot),{promise:new Promise(r=>{$.tasks.add(t={c:e,f:r})}),abort(){$.tasks.delete(t)}}}function Q(e,t){re(()=>{e.dispatchEvent(new CustomEvent(t))})}function fe(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function It(e){const t={},r=e.split(";");for(const s of r){const[l,v]=s.split(":");if(!l||v===void 0)break;const o=fe(l.trim());t[o]=v.trim()}return t}const ve=e=>e;function pe(e,t,r,s){var l=(e&Ht)!==0,v="both",o,_=t.inert,u=t.style.overflow,c,n;function x(){var f=Ut,A=$t;At(null),Nt(null);try{return o??(o=r()(t,(s==null?void 0:s())??{},{direction:v}))}finally{At(f),Nt(A)}}var w={is_global:l,in(){t.inert=_,Q(t,"introstart"),c=ft(t,x(),n,1,()=>{Q(t,"introend"),c==null||c.abort(),c=o=void 0,t.style.overflow=u})},out(f){t.inert=!0,Q(t,"outrostart"),n=ft(t,x(),c,0,()=>{Q(t,"outroend"),f==null||f()})},stop:()=>{c==null||c.abort(),n==null||n.abort()}},y=$t;if((y.transitions??(y.transitions=[])).push(w),te){var m=l;if(!m){for(var i=y.parent;i&&(i.f&Dt)!==0;)for(;(i=i.parent)&&(i.f&Gt)===0;);m=!i||(i.f&Jt)!==0}m&&Vt(()=>{Wt(()=>w.in())})}}function ft(e,t,r,s,l){var v=s===1;if(Kt(t)){var o,_=!1;return Qt(()=>{if(!_){var f=t({direction:v?"in":"out"});o=ft(e,f,r,s,l)}}),{abort:()=>{_=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return l(),{abort:q,deactivate:q,reset:q,t:()=>s};const{delay:u=0,css:c,tick:n,easing:x=ve}=t;var w=[];if(v&&r===void 0&&(n&&n(0,1),c)){var y=It(c(0,1));w.push(y,y)}var m=()=>1-s,i=e.animate(w,{duration:u});return i.onfinish=()=>{var f=(r==null?void 0:r.t())??1-s;r==null||r.abort();var A=s-f,R=t.duration*Math.abs(A),T=[];if(R>0){var N=!1;if(c)for(var L=Math.ceil(R/16.666666666666668),F=0;F<=L;F+=1){var D=f+A*x(F/L),C=It(c(D,1-D));T.push(C),N||(N=C.overflow==="hidden")}N&&(e.style.overflow="hidden"),m=()=>{var E=i.currentTime;return f+A*x(E/R)},n&&ue(()=>{if(i.playState!=="running")return!1;var E=m();return n(E,1-E),!0})}i=e.animate(T,{duration:R,fill:"forwards"}),i.onfinish=()=>{m=()=>s,n==null||n(s,1-s),l()}},{abort:()=>{i&&(i.cancel(),i.effect=null,i.onfinish=q)},deactivate:()=>{l=q},reset:()=>{s===0&&(n==null||n(1,0))},t:()=>m()}}function de(e){const t=e-1;return t*t*t+1}function Rt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function _e(e,{delay:t=0,duration:r=400,easing:s=de,x:l=0,y:v=0,opacity:o=0}={}){const _=getComputedStyle(e),u=+_.opacity,c=_.transform==="none"?"":_.transform,n=u*(1-o),[x,w]=Rt(l),[y,m]=Rt(v);return{delay:t,duration:r,easing:s,css:(i,f)=>`
			transform: ${c} translate(${(1-i)*x}${w}, ${(1-i)*y}${m});
			opacity: ${u-n*f}`}}function be(e,t,r){t(),d(r,!0)}var me=vt('<li class="svelte-1nu4p3t"><a> </a></li>'),ye=vt('<div class="listener svelte-1nu4p3t"></div>'),ge=(e,t)=>d(t,!a(t)),he=(e,t)=>d(t,!a(t)),ke=vt('<div class="layout svelte-1nu4p3t"><div class="borad svelte-1nu4p3t"><nav class="svelte-1nu4p3t"><ul class="svelte-1nu4p3t"></ul></nav> <a class="slide svelte-1nu4p3t" aria-label="スライド"></a></div> <a class="sub-wrap svelte-1nu4p3t"><div aria-label="スライド"></div> <!> <div class="sub svelte-1nu4p3t"><p class="md:text-2xl lg:text-3xl svelte-1nu4p3t"> </p></div></a> <input type="range" min="0" class="progress svelte-1nu4p3t"> <div class="menu grid grid-cols-5 gap-0.5 svelte-1nu4p3t"><button aria-label="voice" class="svelte-1nu4p3t"><iconify-icon></iconify-icon></button> <button aria-label="auto-voice" class="svelte-1nu4p3t"><iconify-icon></iconify-icon></button> <button aria-label="play-voice" class="svelte-1nu4p3t"><iconify-icon></iconify-icon></button> <button aria-label="stop-voice" class="svelte-1nu4p3t"><iconify-icon></iconify-icon></button> <div class="speedometer flex items-center justify-center svelte-1nu4p3t"><iconify-icon></iconify-icon> <input type="range" min="0.5" max="2" step="0.1" class="w-[60%] accent-gray-300 svelte-1nu4p3t"></div></div></div>',2);function Fe(e,t){Xt(t,!0);let r=Yt(t.data.courseId);const{courseName:s,chapterId:l,chapterName:v,page:o}=t.data.scenario,_=k(()=>o.length);let u=S(0),c=k(()=>o[a(u)].subtitle.length),n=S(0),x=k(()=>o[a(u)].subtitle[a(n)].text),w=k(()=>o[a(u)].subtitle[a(n)].color||"black"),y=k(()=>`/${r}/img/${o[a(u)].subtitle[a(n)].slide}`),m=k(()=>`/actor/${o[a(u)].subtitle[a(n)].actorImg}`),i=null,f=k(()=>o[a(u)].subtitle[a(n)].voice),A=k(()=>`/${r}/voice/${a(f)}`),R=k(()=>o[a(u)].subtitle[a(n)].anime),T=S(!1),N=S(!0),L=S(!1),F=k(()=>`${o[a(u)].subtitle[a(n)].listener}`),D=k(()=>`/actor/${a(F)}`),C=S(!0),E=S(!0),O=S(1),pt=1;se(()=>(i=new Audio("/sounds/yo.mp3"),i.onerror=()=>{console.error(`音声ファイル "${a(A)}" の読み込みに失敗しました。`)},i.load(),i.playbackRate=Number(a(O)),()=>{i&&(i.pause(),i.removeAttribute("src"),i.load(),i=null)}));function X(){if(a(N)&&a(f)&&a(C))Y();else{if(a(u)+1==a(_)&&a(n)+1==a(c)){a(L)||d(L,!0);return}a(n)+1==a(c)?(Et(u),d(n,0)):Et(n),a(C)&&Y()}d(N,!1)}function jt(g){d(u,g,!0),d(n,0),Z(),d(N,!0)}async function Y(){i&&i.pause(),a(f)&&(i=await new Audio(a(A)),i.playbackRate=Number(a(O)),i.volume=Number(pt),i.play(),d(T,!0),d(N,!1),i.addEventListener("ended",()=>{d(T,!1),a(E)&&X()}))}function Z(){i&&(i.pause(),d(T,!1))}function Mt(){i&&(i.pause(),i.playbackRate=Number(a(O)),i.volume=Number(pt),i.play())}var tt=ke(),et=b(tt),at=b(et),dt=b(at);ae(dt,21,()=>o,ie,(g,P,wt)=>{var lt=me(),B=b(lt);H(B,"href",null),B.__click=()=>jt(wt);var qt=b(B,!0);p(B),p(lt),ut(()=>{I(B,1,`hover:bg-black/70 md:text-2xl ${wt==a(u)?"bg-black/70":""}`,"svelte-1nu4p3t"),St(qt,a(P).title)}),ct(g,lt)}),p(dt),p(at);var it=h(at,2);H(it,"href",null),it.__click=X,p(et);var j=h(et,2);H(j,"href",null),j.__click=X;var rt=b(j),_t=h(rt,2);{var Pt=g=>{var P=ye();ut(()=>K(P,`background-image: url(${a(D)??""})`)),pe(3,P,()=>_e,()=>({x:100,duration:300})),ct(g,P)};ee(_t,g=>{a(F)&&g(Pt)})}var bt=h(_t,2),st=b(bt),Bt=b(st,!0);p(st),p(bt),p(j);var M=h(j,2);Tt(M),M.__change=[be,Z,N];var mt=h(M,2),G=b(mt);G.__click=[ge,C];var yt=b(G);z(yt,"icon","mdi:volume"),p(G);var J=h(G,2);J.__click=[he,E];var gt=b(J);z(gt,"icon","mdi:loop"),p(J);var V=h(J,2);V.__click=Y;var ht=b(V);z(ht,"icon","mdi:play"),I(ht,1,"svelte-1nu4p3t"),p(V);var W=h(V,2);W.__click=Z;var kt=b(W);z(kt,"icon","mdi:stop"),I(kt,1,"svelte-1nu4p3t"),p(W);var xt=h(W,2),nt=b(xt);z(nt,"icon","mdi:speedometer"),I(nt,1,"svelte-1nu4p3t");var ot=h(nt,2);Tt(ot),ot.__change=Mt,p(xt),p(mt),p(tt),ut(()=>{K(it,`background-image: url(${a(y)??""})`),I(rt,1,`actor ${a(R)?"anime ":""} ${a(T)&&!a(F)?"talk":""}`,"svelte-1nu4p3t"),K(rt,`background-image: url(${a(m)??""})`),K(st,`-webkit-text-stroke-color: ${a(w)??""};`),St(Bt,a(x)),H(M,"max",a(c)-1),I(yt,1,Ct(a(C)?"":"text-gray-600"),"svelte-1nu4p3t"),I(gt,1,Ct(a(E)?"":"text-gray-600"),"svelte-1nu4p3t")}),Ft(M,()=>a(n),g=>d(n,g)),Ft(ot,()=>a(O),g=>d(O,g)),ct(e,tt),Zt()}zt(["click","change"]);export{Fe as component};
